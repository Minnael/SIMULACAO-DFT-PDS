# FILTRO FIR PARA O SINAL DE VOZ (PASSA-BAIXA)
M = 221  # Número de coeficientes do filtro
fc = 4500  # Frequência de corte (Hz)
wc = 2 * np.pi * fc / fs  # Frequência de corte normalizada

# Geração dos coeficientes do filtro FIR com janela de Blackman
h_voice = np.zeros(M)

function_filter(h_voice, M, wc) 

h_voice = h_voice / np.sum(h_voice)  # Normalizar para evitar alterações na amplitude



duracao = 10  # duração da gravação em segundos
sample_rate_amostra = 44100

# UTILIZANDO A FUNÇÃO SD.REC PARA GRAVAR O AUDIO
print("Gravando...")
audio_data_amostra = sd.rec(int(duracao * sample_rate_amostra), samplerate=sample_rate_amostra, channels=1, dtype='float64')
sd.wait() 
print("Gravação concluída!")

# SALVANDO AMOSTRA PARA COMPARAR FUTURAMENTE 
write('amostra_teste.wav', sample_rate_amostra, (audio_data_amostra * 32767).astype(np.int16))